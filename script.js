const translations = {
  is: {
    nav_home: 'Heim',
    nav_about: 'Um mig',
    nav_portfolio: 'Verk',
    nav_booking: 'Bókun',
    nav_faq: 'Spurt og svarað',
    nav_contact: 'Hafa samband',

    hero_title: 'ANTON TATTOO',
    hero_tagline: 'Sérhæfður í hreinum línum, fínlegum smáatriðum og sérsniðnum hönnunum.',
    cta_book: 'Bóka tíma',
    cta_view_work: 'Skoða verk',

    about_title: 'Um Anton',
    about_intro: 'Góðan dag, ég heiti Anton. Ég hef verið að gera tattú í yfir tuttugu og fimm ár. Ég elska starfið mitt og lærði við listaskóla í sjö ár. Það hvetur mig að vinna í mismunandi stílum og ekki staðna. Ég legg mikinn tíma í hvern viðskiptavin til að gera tattúið sérstakt og eins einstakt og mögulegt er.',
    about_details_shop: 'Eigandi listasölu í Garðastræti 2.',
    about_details_from: 'Frá Eistlandi, búsettur á Íslandi.',
    about_details_exclusive: 'Sérhönnun og sjónræn útfærsla í Procreate; vinn í mörgum stílum.',
    about_details_instagram_label: 'Instagram:',
    about_details_artacc_label: 'Listareikningur:',

    portfolio_title: 'Verk',
    filter_all: 'Allt',
    filter_men: 'Karltattú',
    filter_women: 'Konutattú',
    filter_fineline: 'Fine line',
    filter_realism: 'Realism',
    filter_minimal: 'Minimal',
    services_title: 'Þjónusta, gildi og ferlið',
    service_custom: 'Sérhönnun',
    service_custom_desc: 'Einstök hönnun fyrir þig, unnin með Procreate og samráði.',
    service_lines: 'Hreinar línur',
    service_lines_desc: 'Nákvæm lína, fín smáatriði og endingargóð frágangur.',
    service_hygiene: 'Hreinlæti',
    service_hygiene_desc: 'Fagleg vinnubrögð og hreinlætisstaðlar á hverju skrefi.',
    service_experience: 'Reynsla',
    service_experience_desc: '25+ ár í faginu; líkaminn sem strigi, listin sem lífsstíll.',
    process_consult: 'Samráð',
    process_consult_desc: 'Við ræðum hugmynd, stærð og staðsetningu.',
    process_design: 'Hönnun',
    process_design_desc: 'Sjónræn útfærsla og aðlögun að líkamsformi.',
    process_session: 'Tattú',
    process_session_desc: 'Vinna á stúdíói með hreinlæti og fagmennsku.',
    step: 'Skref',

    booking_title: 'Hafa samband',
    contact_intro: 'Komdu við, sendu skilaboð eða hringdu. Hér er stutta leiðin til mín.',
    form_name_label: 'Nafn',
    form_email_label: 'Netfang',
    form_phone_label: 'Sími',
    form_message_label: 'Skilaboð',
    form_placement_label: 'Staðsetning',
    form_budget_label: 'Fjárhagsáætlun',
    form_date_label: 'Óskadagsetning',
    form_submit: 'Senda beiðni',
    banner_title: 'Tilbúin(n) fyrir næsta tattú?',
    banner_cta: 'Bóka tíma',
    inquiry_title: 'Senda fyrirspurn',
    inquiry_sub: 'Segðu mér frá hugmyndinni þinni, stíl og stærð — ég svara fljótt.',
    inquiry_sub_alt: 'Hringdu eða sendu DM á Instagram — ég svara fljótt.',
    inquiry_call_title: 'Hringja',
    inquiry_dm_title: 'Instagram DM',
    inquiry_name_label: 'Nafn',
    inquiry_email_label: 'Netfang',
    inquiry_phone_label: 'Sími (val)',
    inquiry_message_label: 'Skilaboð',
    inquiry_submit: 'Senda fyrirspurn',

    testimonials_title: 'Umsagnir',
    testimonial_1: '"Frábær reynsla! Anton hlustaði vel og útkoman var fullkomin."',
    testimonial_2: '"Hrein vinna og flott flæði í allri ferlinu."',

    faq_title: 'Algengar spurningar',
    faq_process_q: 'Hvernig fer ferlið fram?',
    faq_process_a: 'Við byrjum á samráði þar sem við förum yfir hugmyndir, stærð og staðsetningu. Síðan er bókaður tími og útfærsla unnin.',
    faq_pain_q: 'Gera tattúirnir vont?',
    faq_pain_a: 'Sársauki er mismunandi eftir einstaklingum og staðsetningu. Anton vinnur hratt, hreint og með virðingu fyrir þægindum þínum.',
    faq_aftercare_q: 'Eftirmeðferð',
    faq_aftercare_a: 'Fylgdu leiðbeiningum um hreinsun, rakakrem og forðastu sól og sund fyrstu vikurnar.',
    faq_booking_q: 'Hvernig bóka ég?',
    faq_booking_a: 'Notaðu bókunarformið hér á síðunni eða sendu tölvupóst. Þú færð svar fljótlega.',
    about_p1: 'Góðan dag, ég heiti Anton. Ég hef verið að gera tattú í yfir tuttugu og fimm ár. Ég elska starfið mitt og lærði við listaskóla í sjö ár. Það hvetur mig að vinna í mismunandi stílum og ekki staðna. Ég legg mikinn tíma í hvern viðskiptavin til að gera tattúið sérstakt og eins einstakt og mögulegt er.',
    about_p2: 'Ég bíð þín í stúdíóinu mínu á Garðastræti 2.',

    location_title: 'Staðsetning',
    contact_phone: 'Sími:',
    contact_email: 'Netfang:',
    contact_social: 'Samfélagsmiðlar:',
    contact_visit: 'Heimsókn',
    contact_phone_h: 'Sími',
    contact_email_h: 'Netfang',
    contact_hours_h: 'Opnunartími',
    contact_hours_value: 'Virka daga 10–18',

    footer_rights: 'öll réttindi áskilin'
  },
  en: {
    nav_home: 'Home',
    nav_about: 'About',
    nav_portfolio: 'Portfolio',
    nav_booking: 'Booking',
    nav_faq: 'FAQ',
    nav_contact: 'Contact',

    hero_title: 'ANTON TATTOO',
    hero_tagline: 'Specialized in clean lines, fine details and custom designs.',
    cta_book: 'Book a session',
    cta_view_work: 'View work',

    about_title: 'About Anton',
    about_intro: 'Good day, my name is Anton. I have been doing tattoos for over twenty-five years. I love my job very much; I spent seven years studying at an art school. I am inspired to work in different styles and not stand still. I try to devote a lot of time to each client in my work to make this tattoo special and as exclusive as possible.',
    about_details_shop: 'Art shop owner at Garðastræti 2.',
    about_details_from: 'From Estonia, living in Iceland.',
    about_details_exclusive: 'Exclusive design and visualization with Procreate; I work in many styles.',
    about_details_instagram_label: 'Instagram:',
    about_details_artacc_label: 'Art account:',

    portfolio_title: 'Portfolio',
    filter_all: 'All',
    filter_men: "Men's tattoos",
    filter_women: "Women's tattoos",
    filter_fineline: 'Fine line',
    filter_realism: 'Realism',
    filter_minimal: 'Minimal',
    services_title: 'Services, values and process',
    service_custom: 'Custom design',
    service_custom_desc: 'Unique artwork for you, created in Procreate with consultation.',
    service_lines: 'Clean lines',
    service_lines_desc: 'Precise linework, fine details and durable execution.',
    service_hygiene: 'Hygiene',
    service_hygiene_desc: 'Professional practice and hygiene standards at every step.',
    service_experience: 'Experience',
    service_experience_desc: '25+ years in the craft; the body as canvas, art as lifestyle.',
    process_consult: 'Consultation',
    process_consult_desc: 'We discuss idea, size and placement.',
    process_design: 'Design',
    process_design_desc: 'Visual development tailored to body form.',
    process_session: 'Tattoo',
    process_session_desc: 'Studio work with hygiene and professionalism.',
    step: 'Step',

    booking_title: 'Contact',
    contact_intro: 'Visit, message or call. Here is the quick way to reach me.',
    form_name_label: 'Name',
    form_email_label: 'Email',
    form_phone_label: 'Phone',
    form_message_label: 'Message',
    form_placement_label: 'Placement',
    form_budget_label: 'Budget',
    form_date_label: 'Preferred Date',
    form_submit: 'Send request',
    banner_title: 'Ready for the next tattoo?',
    banner_cta: 'Book a session',
    inquiry_title: 'Send an inquiry',
    inquiry_sub: 'Tell me about your idea, style and size — I reply quickly.',
    inquiry_sub_alt: 'Call or send an Instagram DM — I reply quickly.',
    inquiry_call_title: 'Call',
    inquiry_dm_title: 'Instagram DM',
    inquiry_name_label: 'Name',
    inquiry_email_label: 'Email',
    inquiry_phone_label: 'Phone (optional)',
    inquiry_message_label: 'Message',
    inquiry_submit: 'Send inquiry',

    testimonials_title: 'Testimonials',
    testimonial_1: '"Amazing experience! Anton listened carefully and the result was perfect."',
    testimonial_2: '"Clean work and smooth process throughout."',

    faq_title: 'Frequently Asked Questions',
    faq_process_q: 'How does the process work?',
    faq_process_a: 'We start with a consultation to discuss ideas, size and placement. Then we book a session and finalize the design.',
    faq_pain_q: 'Does it hurt?',
    faq_pain_a: 'Pain varies by person and placement. Anton works quickly, cleanly and with respect for your comfort.',
    faq_aftercare_q: 'Aftercare',
    faq_aftercare_a: 'Follow the aftercare instructions: cleanse, moisturize and avoid sun and swimming for the first weeks.',
    faq_booking_q: 'How do I book?',
    faq_booking_a: 'Use the booking form on this page or send an email. You will get a reply shortly.',
    about_p1: 'Good day, my name is Anton. I have been doing tattoos for over twenty-five years. I love my job very much; I spent seven years studying at an art school. I am inspired to work in different styles and not stand still. I try to devote a lot of time to each client in my work to make this tattoo special and as exclusive as possible.',
    about_p2: 'I am waiting for you in my studio at the address. Garðastræti 2',

    location_title: 'Location',
    contact_phone: 'Phone:',
    contact_email: 'Email:',
    contact_social: 'Social:',
    contact_visit: 'Visit',
    contact_phone_h: 'Phone',
    contact_email_h: 'Email',
    contact_hours_h: 'Hours',
    contact_hours_value: 'Weekdays 10am–6pm',

    footer_rights: 'all rights reserved'
  }
};

const langButtons = document.querySelectorAll('.lang-btn');
const html = document.documentElement;

function setLanguage(lang) {
  const dict = translations[lang];
  html.setAttribute('lang', lang === 'is' ? 'is' : 'en');
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (dict[key]) {
      el.textContent = dict[key];
    }
  });
  // Update image alts
  document.querySelectorAll('img[data-alt-is][data-alt-en]').forEach(img => {
    const alt = lang === 'is' ? img.getAttribute('data-alt-is') : img.getAttribute('data-alt-en');
    if (alt) img.setAttribute('alt', alt);
  });
  // Update nav toggle label
  const navToggle = document.querySelector('.nav-toggle');
  if (navToggle) {
    navToggle.setAttribute('aria-label', lang === 'is' ? 'Opna valmynd' : 'Open menu');
  }
  // Update placeholders
  const placeholders = {
    is: {
      name: 'Fullt nafn',
      email: 'netfang@dæmi.is',
      phone: '555-1234',
      idea: 'Lýstu hugmyndinni',
      placement: 't.d. framhandleggur',
      budget: 'ISK',
      'inq-name': 'Fullt nafn',
      'inq-email': 'netfang@dæmi.is',
      'inq-phone': '555-1234',
      'inq-message': 'Skrifaðu skilaboð'
    },
    en: {
      name: 'Full name',
      email: 'name@example.com',
      phone: '555-1234',
      idea: 'Describe your idea',
      placement: 'e.g. forearm',
      budget: 'ISK',
      'inq-name': 'Full name',
      'inq-email': 'name@example.com',
      'inq-phone': '555-1234',
      'inq-message': 'Write your message'
    }
  };
  Object.entries(placeholders[lang]).forEach(([id, value]) => {
    const input = document.getElementById(id);
    if (input) input.setAttribute('placeholder', value);
  });
}

langButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    langButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const lang = btn.getAttribute('data-lang');
    setLanguage(lang);
  });
});

// Mobile nav
const navToggle = document.querySelector('.nav-toggle');
const menu = document.getElementById('primary-menu');
if (navToggle && menu) {
  navToggle.addEventListener('click', () => {
    const expanded = navToggle.getAttribute('aria-expanded') === 'true';
    navToggle.setAttribute('aria-expanded', String(!expanded));
    menu.classList.toggle('show');
    navToggle.setAttribute('aria-label', (!expanded ? (html.lang === 'is' ? 'Loka valmynd' : 'Close menu') : (html.lang === 'is' ? 'Opna valmynd' : 'Open menu')));
  });
  // Close menu when clicking a link (mobile UX)
  menu.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
    menu.classList.remove('show');
    navToggle.setAttribute('aria-expanded', 'false');
  }));
  // Close on escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      menu.classList.remove('show');
      navToggle.setAttribute('aria-expanded', 'false');
    }
  });
}

// Lightbox
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightbox-image');
const lightboxClose = document.querySelector('.lightbox-close');
let gallerySequence = [];
let galleryIndex = 0;
const navPrev = document.querySelector('.nav-prev');
const navNext = document.querySelector('.nav-next');

document.querySelectorAll('.gallery-item').forEach(item => {
  item.addEventListener('click', e => {
    e.preventDefault();
    const href = item.getAttribute('href');
    const img = item.querySelector('img');
    lightboxImg.src = href;
    lightboxImg.alt = img ? img.alt : '';
    lightbox.classList.add('show');
    lightbox.setAttribute('aria-hidden', 'false');
  });
});

// Cover galleries (grouped)
document.querySelectorAll('.gallery-cover').forEach(cover => {
  cover.addEventListener('click', e => {
    e.preventDefault();
    const list = (cover.getAttribute('data-images') || '').split(',').map(s => s.trim()).filter(Boolean);
    if (!list.length) return;
    gallerySequence = list;
    galleryIndex = 0;
    lightboxImg.src = gallerySequence[galleryIndex];
    lightboxImg.alt = '';
    lightbox.classList.add('show');
    lightbox.setAttribute('aria-hidden', 'false');
  });
  const prevBtn = cover.querySelector('.cover-prev');
  const nextBtn = cover.querySelector('.cover-next');
  const images = (cover.getAttribute('data-images') || '').split(',').map(s => s.trim()).filter(Boolean);
  let coverIndex = 0;
  function setCover(idx) {
    if (!images.length) return;
    coverIndex = (idx + images.length) % images.length;
    const imgEl = cover.querySelector('img');
    if (imgEl) imgEl.src = images[coverIndex];
  }
  if (prevBtn) prevBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); setCover(coverIndex - 1); });
  if (nextBtn) nextBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); setCover(coverIndex + 1); });
});

function closeLightbox() {
  lightbox.classList.remove('show');
  lightbox.setAttribute('aria-hidden', 'true');
  lightboxImg.src = '';
}

if (lightboxClose) lightboxClose.addEventListener('click', closeLightbox);
if (lightbox) lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeLightbox(); });

// Lightbox next/prev with arrows or click
function showNext(delta) {
  if (!gallerySequence.length) return;
  galleryIndex = (galleryIndex + delta + gallerySequence.length) % gallerySequence.length;
  lightboxImg.src = gallerySequence[galleryIndex];
}
document.addEventListener('keydown', (e) => {
  if (!lightbox.classList.contains('show')) return;
  if (e.key === 'ArrowRight') showNext(1);
  if (e.key === 'ArrowLeft') showNext(-1);
});
lightboxImg.addEventListener('click', () => showNext(1));
if (navPrev) navPrev.addEventListener('click', (e) => { e.stopPropagation(); showNext(-1); });
if (navNext) navNext.addEventListener('click', (e) => { e.stopPropagation(); showNext(1); });

// Filters
const filterButtons = document.querySelectorAll('.filter-btn');
const items = document.querySelectorAll('.gallery-item');

function applyFilter(filter) {
  items.forEach(it => {
    const cat = it.getAttribute('data-category');
    const show = filter === 'all' || filter === cat;
    it.style.display = show ? '' : 'none';
  });
}

filterButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    filterButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    applyFilter(btn.getAttribute('data-filter'));
  });
});

// Apply initial filter based on the button marked active
const initialActive = document.querySelector('.filters .filter-btn.active');
if (initialActive) {
  applyFilter(initialActive.getAttribute('data-filter'));
}

// Form handling (simple client-side)
const form = document.getElementById('booking-form');
const formMsg = document.getElementById('form-message');
if (form) {
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    if (!form.checkValidity()) {
      formMsg.textContent = html.lang === 'is' ? 'Vinsamlegast fylltu út nauðsynleg svæði.' : 'Please fill in the required fields.';
      return;
    }
    const data = Object.fromEntries(new FormData(form).entries());
    console.log('Booking request', data);
    form.reset();
    formMsg.textContent = html.lang === 'is' ? 'Takk! Ég hef samband fljótlega.' : 'Thanks! I will get back to you shortly.';
  });
}

// Year
const yearSpan = document.getElementById('year');
if (yearSpan) yearSpan.textContent = String(new Date().getFullYear());

// Fixed white-gold palette: disable dynamic logo theming
function rgbToHsl(r, g, b) {
  r /= 255; g /= 255; b /= 255;
  const max = Math.max(r, g, b), min = Math.min(r, g, b);
  let h, s, l = (max + min) / 2;
  if (max === min) { h = s = 0; }
  else {
    const d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 1); break;
      case g: h = (b - r) / d + 2; break;
      default: h = (r - g) / d + 4; break;
    }
    h /= 6;
  }
  return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
}

function hsl(h, s, l) { return `hsl(${h} ${s}% ${l}%)`; }

// Convert HSL (0-360,0-100,0-100) to RGB (0-255)
function hslToRgb(h, s, l) {
  h /= 360; s /= 100; l /= 100;
  const c = (1 - Math.abs(2 * l - 1)) * s;
  const x = c * (1 - Math.abs(((h * 6) % 2) - 1));
  const m = l - c / 2;
  let r1 = 0, g1 = 0, b1 = 0;
  if (h >= 0 && h < 1/6) { r1 = c; g1 = x; b1 = 0; }
  else if (h < 2/6) { r1 = x; g1 = c; b1 = 0; }
  else if (h < 3/6) { r1 = 0; g1 = c; b1 = x; }
  else if (h < 4/6) { r1 = 0; g1 = x; b1 = c; }
  else if (h < 5/6) { r1 = x; g1 = 0; b1 = c; }
  else { r1 = c; g1 = 0; b1 = x; }
  return [Math.round((r1 + m) * 255), Math.round((g1 + m) * 255), Math.round((b1 + m) * 255)];
}

function applyBrandBackgroundFromRGB(r, g, b) {
  const { h, s, l } = rgbToHsl(r, g, b);
  // derive a cohesive palette from logo color
  // Shift to light theme around the logo hue
  const darkL = Math.max(92, Math.min(l + 50, 96)); // base page background is very light
  const elevL = Math.min(darkL - 2, 98);
  const borderL = Math.max(82, darkL - 10);
  const accentS = Math.min(85, Math.max(35, s));
  const goldLike = `hsl(${h} ${Math.max(40, Math.min(75, s + 15))}% ${Math.min(55, Math.max(45, l))}%)`;
  const mintLike = '#F6E9B5'; // fixed cream tone (replaces any green)
  const root = document.documentElement;
  root.style.setProperty('--bg', hsl(h, s, darkL));
  root.style.setProperty('--bg-elev', hsl(h, s, elevL));
  root.style.setProperty('--border', hsl(h, Math.max(5, Math.round(s * 0.6)), borderL));
  root.style.setProperty('--gold', goldLike);
  root.style.setProperty('--mint', mintLike);
  root.style.setProperty('--accent', goldLike);
  const [br, bg, bb] = hslToRgb(h, s, darkL);
  root.style.setProperty('--bg-rgb', `${br} ${bg} ${bb}`);
  // create related tints for sections
  const aboutL = Math.min(darkL, 98);
  const portfolioL = Math.min(darkL - 2, 96);
  const bookingL = Math.min(darkL - 4, 94);
  const faqL = Math.min(darkL - 3, 95);
  const locationL = Math.min(darkL - 5, 93);
  const footerL = Math.min(darkL - 1, 97);
  root.style.setProperty('--page-bg', hsl(h, s, darkL));
  root.style.setProperty('--section-about-bg', hsl(h, s, aboutL));
  root.style.setProperty('--section-portfolio-bg', hsl(h, s, portfolioL));
  root.style.setProperty('--section-booking-bg', hsl(h, s, bookingL));
  root.style.setProperty('--section-faq-bg', hsl(h, s, faqL));
  root.style.setProperty('--section-location-bg', hsl(h, s, locationL));
  root.style.setProperty('--footer-bg', hsl(h, s, footerL));
  root.style.setProperty('--section-separator', hsl(h, Math.max(8, Math.round(s * 0.35)), Math.max(78, darkL - 12)));
  // keep text as light grey for contrast
  const themeMeta = document.querySelector('meta[name="theme-color"]');
  if (themeMeta) themeMeta.setAttribute('content', hsl(h, s, darkL));
}

function extractAverageRGBFromImage(src, onDone) {
  const img = new Image();
  img.onload = () => {
    try {
      const canvas = document.createElement('canvas');
      const w = 64, h = Math.max(1, Math.round((img.height / img.width) * 64));
      canvas.width = w; canvas.height = h;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0, w, h);
      const { data } = ctx.getImageData(0, 0, w, h);
      let r = 0, g = 0, b = 0, count = 0;
      for (let i = 0; i < data.length; i += 4) {
        const a = data[i + 3];
        if (a < 10) continue; // skip transparent
        const pr = data[i], pg = data[i + 1], pb = data[i + 2];
        // down-weight near-white pixels (likely background)
        const isNearWhite = pr > 235 && pg > 235 && pb > 235;
        const weight = isNearWhite ? 0.2 : 1;
        r += pr * weight; g += pg * weight; b += pb * weight; count += weight;
      }
      if (count > 0) {
        onDone(Math.round(r / count), Math.round(g / count), Math.round(b / count));
      } else {
        onDone(212, 175, 55); // fallback to brand-like gold
      }
    } catch (_) { onDone(212, 175, 55); }
  };
  img.src = 'logo.png';
}

// Disabled: dynamic theming
// extractAverageRGBFromImage('logo.png', (r, g, b) => applyBrandBackgroundFromRGB(r, g, b));

// Initialize default language
setLanguage('is');

// Header blending with hero: toggle scrolled state
const header = document.querySelector('.site-header');
const hero = document.getElementById('hero');
if (header && hero) {
  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting && entry.intersectionRatio > 0.2) {
        header.classList.remove('scrolled');
      } else {
        header.classList.add('scrolled');
      }
    });
  }, { threshold: [0, 0.2, 1] });
  io.observe(hero);
}

// Clicking the center hero logo scrolls to top (reload-like UX)
const heroLogoLink = document.querySelector('.hero-logo');
if (heroLogoLink) {
  heroLogoLink.addEventListener('click', (e) => {
    e.preventDefault();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
}

// Scroll reveal
const revealEls = document.querySelectorAll('.reveal');
if (revealEls.length) {
  const ro = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
        ro.unobserve(entry.target);
      }
    });
  }, { threshold: 0.15 });
  revealEls.forEach(el => ro.observe(el));
}

// Extend translations for new about text (fallbacks if not present)
translations.is.about_p1 = translations.is.about_p1 || 'Anton er tattúlisti í hjarta Reykjavíkur. Hann vinnur náið með hverjum viðskiptavini til að ná fram hugmynd sem talar til manns — með áherslu á hreinar línur, skýrar formgerðir og endingargóða framkvæmd.';
translations.is.about_p2 = translations.is.about_p2 || 'Í stúdíóinu er rólegt andrúmsloft, öryggi og hreinlæti í fyrirrúmi. Anton nýtir ferlið frá fyrstu skissu til lokafrágangs til að tryggja að hvert verk sé bæði fagurt og merkingarbært.';
translations.is.about_quote = translations.is.about_quote || '„Tattú er samtal milli hugmyndar og húðar — ég hjálpa þér að fanga réttan tón.“';
translations.is.stat_years = translations.is.stat_years || 'ár reynsla';
translations.is.stat_clients = translations.is.stat_clients || 'ánægðir viðskiptavinir';
translations.is.stat_styles = translations.is.stat_styles || 'stílar & nálgun';
translations.is.stat_custom = translations.is.stat_custom || 'sérhönnun';

translations.en.about_p1 = translations.en.about_p1 || 'Anton is a tattoo artist in the heart of Reykjavik. He works closely with every client to realize an idea that resonates — with a focus on clean lines, clear structure and lasting execution.';
translations.en.about_p2 = translations.en.about_p2 || 'The studio puts calm atmosphere, safety and hygiene first. From first sketch to final pass, each piece is crafted to be both beautiful and meaningful.';
translations.en.about_quote = translations.en.about_quote || '“A tattoo is a dialogue between an idea and the skin — I help capture the right tone.”';
translations.en.stat_years = translations.en.stat_years || 'years experience';
translations.en.stat_clients = translations.en.stat_clients || 'happy clients';
translations.en.stat_styles = translations.en.stat_styles || 'styles & approaches';
translations.en.stat_custom = translations.en.stat_custom || 'custom design';

// Simple tilt effect for cards
document.querySelectorAll('.card-tilt').forEach(card => {
  const maxTilt = 6;
  function onMove(e) {
    const rect = card.getBoundingClientRect();
    const px = (e.clientX - rect.left) / rect.width;
    const py = (e.clientY - rect.top) / rect.height;
    const rx = (py - 0.5) * -maxTilt;
    const ry = (px - 0.5) * maxTilt;
    card.style.transform = `perspective(600px) rotateX(${rx}deg) rotateY(${ry}deg)`;
  }
  function reset() { card.style.transform = ''; }
  card.addEventListener('mousemove', onMove);
  card.addEventListener('mouseleave', reset);
  card.addEventListener('touchmove', (ev) => {
    const t = ev.touches[0];
    if (!t) return;
    onMove(t);
  });
  card.addEventListener('touchend', reset);
});
